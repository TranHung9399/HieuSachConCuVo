@model List<banSach.Models.Sach>
@{
    ViewBag.Title = "Hiệu Sách Con Cú Vọ";
    var loaiList = ViewBag.LoaiList as List<banSach.Models.Loai>;
    <link rel="stylesheet" href="~/Content/css/thongbao1.css" />
    @Html.Partial("_CustomToast")}
<section class="hero-slider" id="hero-slider" style="display:none">
    <div id="heroCarousel" class="carousel slide" data-bs-ride="carousel">
        <!-- Indicators -->
        <div class="carousel-indicators">
            <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
            <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="1" aria-label="Slide 2"></button>
            <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="2" aria-label="Slide 3"></button>
        </div>

        <!-- Slides -->
        <div class="carousel-inner">
            <!-- Slide 1 -->
            <div class="carousel-item active">
                <div class="image-frame">
                    <img src="@Url.Content("~/img/uudai.png")" class="d-block" alt="Slide 1">
                </div>
            </div>
        </div>

        <!-- Controls -->
        <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>
</section>
<div class="book-features">
    <div class="feature-item">
        <i class="fa fa-truck"></i>
        <div>
            <div class="feature-title">ƯU ĐÃI VẬN CHUYỂN</div>
        </div>
    </div>
    <div class="feature-item">
        <i class="fa fa-gift"></i>
        <div>
            <div class="feature-title">THỂ LOẠI SÁCH PHONG PHÚ</div>
        </div>
    </div>
    <div class="feature-item">
        <i class="fa fa-money-bill-wave"></i>
        <div>
            <div class="feature-title">KHUYẾN MẠI HẤP DẪN</div>
        </div>
    </div>
    <div class="feature-item">
        <i class="fa fa-phone"></i>
        <div>
            <div class="feature-title">HOTLINE:</div>
            <div class="feature-desc">123456</div>
        </div>
    </div>
</div>

<div class="book-tabs mb-4">
	<button class="tab-btn" data-target="#all-books">TẤT CẢ SÁCH</button>
	<button class="tab-btn active" data-target="#new-books">SÁCH MỚI</button>
	<button class="tab-btn" data-target="#best-sellers">SÁCH BÁN CHẠY</button>
</div>
<div id="all-books" class="tab-content">
    <div class="category-section mb-5">
        <h2 class="category-title">TẤT CẢ SÁCH</h2>
        <div class="row">
            @foreach (var sach in Model.Take(8))
            {
                <div class="col-xl-3 col-lg-4 col-md-4 col-12">
                    <div class="single-product fade-in">
                        <div class="product-img">
                            <a href="@Url.Action("Details", "Book", new { id = sach.MaSach })">
                                <div class="image-frame-product">
                                    <img class="default-img" src="~/img/sach/@sach.Hinh" alt="@sach.TenSach">
                                    <img class="hover-img" src="~/img/sach/@sach.Hinh" alt="@sach.TenSach">
                                </div>
                            </a>
                            <div class="button-head">
                                <div class="product-action">
                                    <a data-toggle="modal" data-target="#exampleModal" title="Xem thông tin" href="@Url.Action("Details", "Book", new { id = sach.MaSach })">
                                        <i class="bx bx-show"></i><span>Xem nhanh</span>
                                    </a>
                                </div>
                                <div class="product-action-2">
                                    <a class="btnAddCart btn btn-success px-4"
                                       data-masach="@sach.MaSach"
                                       data-url="@Url.Action("ThemGiohangAjax", "GioHang")">
                                        THÊM VÀO GIỎ
                                    </a>
                                </div>
                            </div>
                        </div>
                        <div class="product-content">
                            <h3>
                                <a href="@Url.Action("Details", "Book", new { id = sach.MaSach })" class="product-title">@sach.TenSach</a>
                            </h3>
                            <div class="product-price">
                                @if (sach.SoLuongTon != 0 && sach.SoLuongTon != null)
                                {
                                    <span class="price">@String.Format("{0:#,##0}", sach.GiaBan) VNĐ</span>
                                }
                                else
                                {
                                    <span class="out-of-stock">Hết Hàng</span>
                                }
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>
        <div class="mt-3 text-center">
            <a href="@Url.Action("Index", "Book", null)" class="btn btn-outline-success">Xem thêm</a>
        </div>
    </div>
</div>
<div id="new-books" class="tab-content active">
        <div class="category-section mb-5">
        <h2 class="category-title">SÁCH MỚI NHẤT</h2>
            <div class="row">
            @foreach (var sach in (ViewBag.NewBooks as List<banSach.Models.Sach>).Take(8))
                {
                    <div class="col-xl-3 col-lg-4 col-md-4 col-12">
                    <div class="single-product fade-in">
                            <div class="product-img">
                                <a href="@Url.Action("Details", "Book", new { id = sach.MaSach })">
                                    <div class="image-frame-product">
                                        <img class="default-img" src="~/img/sach/@sach.Hinh" alt="@sach.TenSach">
                                        <img class="hover-img" src="~/img/sach/@sach.Hinh" alt="@sach.TenSach">
                                    </div>
                                </a>
                                <div class="button-head">
                                    <div class="product-action">
                                        <a data-toggle="modal" data-target="#exampleModal" title="Xem thông tin" href="@Url.Action("Details", "Book", new { id = sach.MaSach })">
                                            <i class="bx bx-show"></i><span>Xem nhanh</span>
                                        </a>
                                    </div>
                                    <div class="product-action-2">
                                        <a class="btnAddCart btn btn-success px-4"
                                           data-masach="@sach.MaSach"
                                           data-url="@Url.Action("ThemGiohangAjax", "GioHang")">
                                            THÊM VÀO GIỎ
                                        </a>
                                    </div>
                                </div>
                            </div>
                            <div class="product-content">
                                <h3>
                                    <a href="@Url.Action("Details", "Book", new { id = sach.MaSach })" class="product-title">@sach.TenSach</a>
                                </h3>
                                <div class="product-price">
                                    @if (sach.SoLuongTon != 0 && sach.SoLuongTon != null)
                                    {
                                        <span class="price">@String.Format("{0:#,##0}", sach.GiaBan) VNĐ</span>
                                    }
                                    else
                                    {
                                        <span class="out-of-stock">Hết Hàng</span>
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                }
            </div>
        <div class="mt-3 text-center">
            <a href="@Url.Action("Index", "Book", new { type = "new" })" class="btn btn-outline-success">Xem thêm</a>
        </div>
    </div>
</div>
<div id="best-sellers" class="tab-content">
    <div class="category-section mb-5">
        <h2 class="category-title">SÁCH BÁN CHẠY</h2>
        <div class="row">
            @foreach (var sach in (ViewBag.BestSellers as List<banSach.Models.Sach>).Take(8))
            {
                <div class="col-xl-3 col-lg-4 col-md-4 col-12">
                    <div class="single-product fade-in">
                        <div class="product-img">
                            <a href="@Url.Action("Details", "Book", new { id = sach.MaSach })">
                                <div class="image-frame-product">
                                    <img class="default-img" src="~/img/sach/@sach.Hinh" alt="@sach.TenSach">
                                    <img class="hover-img" src="~/img/sach/@sach.Hinh" alt="@sach.TenSach">
                                </div>
                            </a>
                            <div class="button-head">
                                <div class="product-action">
                                    <a data-toggle="modal" data-target="#exampleModal" title="Xem thông tin" href="@Url.Action("Details", "Book", new { id = sach.MaSach })">
                                        <i class="bx bx-show"></i><span>Xem nhanh</span>
                                    </a>
                                </div>
                                <div class="product-action-2">
                                    <a class="btnAddCart btn btn-success px-4"
                                       data-masach="@sach.MaSach"
                                       data-url="@Url.Action("ThemGiohangAjax", "GioHang")">
                                        THÊM VÀO GIỎ
                                    </a>
                                </div>
                            </div>
                        </div>
                        <div class="product-content">
                            <h3>
                                <a href="@Url.Action("Details", "Book", new { id = sach.MaSach })" class="product-title">@sach.TenSach</a>
                            </h3>
                            <div class="product-price">
                                @if (sach.SoLuongTon != 0 && sach.SoLuongTon != null)
                                {
                                    <span class="price">@String.Format("{0:#,##0}", sach.GiaBan) VNĐ</span>
                                }
                                else
                                {
                                    <span class="out-of-stock">Hết Hàng</span>
                                }
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>
        <div class="mt-3 text-center">
            <a href="@Url.Action("Index", "Book", new { type = "bestseller" })" class="btn btn-outline-success">Xem thêm</a>
        </div>
    </div>
</div>
<style>
    .hero-slider {
        position: relative;
        width: 100%;
        overflow: hidden;
        margin-bottom: 40px; /* Khoảng cách giữa slide và sách */
    }

    .carousel-item {
        height: 500px; /* Chiều cao cố định cho carousel */
        display: flex; /* Sử dụng flexbox để căn giữa */
        justify-content: center; /* Căn giữa ngang */
        align-items: center; /* Căn giữa dọc */
    }

    .image-frame {
        width: 100%;
        max-width: 1200px; /* Giới hạn chiều rộng tối đa */
        height: 100%;
        border: 2px solid #e5e5e5; /* Khung viền đồng đều */
        border-radius: 8px; /* Bo góc */
        overflow: hidden; /* Ẩn phần thừa của hình ảnh */
        display: flex;
        justify-content: center;
        align-items: center;
        background-color: #fff; /* Nền trắng cho khung */
    }

        .image-frame img {
            width: 100%;
            height: 100%;
            object-fit: cover; /* Đảm bảo hình ảnh lấp đầy khung */
            object-position: center; /* Căn giữa nội dung hình ảnh */
            display: block;
        }

    .carousel-indicators [data-bs-target] {
        background-color: #fff;
        opacity: 0.7;
        width: 12px;
        height: 12px;
        border-radius: 50%;
    }

    .carousel-indicators .active {
        background-color: #ff5e57;
        opacity: 1;
    }

    .carousel-control-prev,
    .carousel-control-next {
        width: 5%;
    }

    .carousel-control-prev-icon,
    .carousel-control-next-icon {
        background-color: rgba(0, 0, 0, 0.5);
        border-radius: 5px;
        padding: 20px;
    }

    .category-section .category-title {
        font-size: 24px;
        font-weight: bold;
        color: #333;
        text-transform: uppercase;
        padding: 0 0 25px 0; /* Khoảng cách 0,5cm (5px) với card sách */
        text-align: center; /* Căn trái */
    }

    .category-section .row {
        margin-top: 0; /* Xóa margin-top của row để sát vào tên loại */
    }

    .single-product {
        border: 1px solid #e5e5e5;
        border-radius: 8px;
        overflow: hidden;
        transition: transform 0.3s ease;
        background-color: #fff; /* Nền trắng cho card */
        min-height: 350px; /* Chiều cao tối thiểu để đồng đều */
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        padding: 0;
        margin: 0;
    }

        .single-product:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

    .product-img {
        display: flex; /* Sử dụng flexbox để căn giữa */
        justify-content: center; /* Căn giữa ngang */
        align-items: center; /* Căn giữa dọc */
        padding: 0px; /* Khoảng đệm đồng đều */
        background-color: #f8f8f8; /* Nền khung đồng đều với carousel */
        width: 100%;
        height: 200px;
    }

    .image-frame-product {
        width: 100%;
        height: 200px; /* Chiều cao cố định cho khung sản phẩm */
        /*border: 2px solid #e5e5e5;*/ /* Khung viền đồng đều với carousel */
        /*border-radius: 8px;*/ /* Bo góc đồng đều */
        /*overflow: hidden;*/ /* Ẩn phần thừa của hình ảnh */
        display: flex;
        justify-content: center;
        align-items: center;
        background-color: #fff;
        padding: 5px; /* Khoảng đệm nhỏ hơn cho sản phẩm */
    }

        .image-frame-product img {
            width: 100%; /* Đảm bảo hình ảnh lấp đầy khung */
            height: 100%;
            object-fit: cover; /* Đảm bảo hình ảnh lấp đầy khung */
            object-position: center; /* Căn giữa nội dung hình ảnh */
            padding: 0;
            margin: 0;
            display: block;
        }

    .product-content {
        padding: 15px;
        flex-grow: 1; /* Đảm bảo nội dung mở rộng để lấp đầy không gian */
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        min-height: 120px; /* Chiều cao tối thiểu để đồng đều */
    }

    .product-title {
        font-size: 18px !important;
        font-weight: 600;
        color: #333;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
        text-overflow: ellipsis;
        line-height: 1.4; /* Khoảng cách dòng đồng đều */
        margin-bottom: 10px; /* Khoảng cách với giá */
        text-align: center;
    }

    .product-price {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 30px; /* Đảm bảo giá có không gian cố định */
    }

        .product-price .price {
            font-size: 18px;
            color: #07a54b;
            font-weight: bold;
        }

        .product-price .out-of-stock {
            font-size: 18px; /* Đồng bộ với giá */
            color: #07a54b; /* Đồng bộ màu với giá */
            font-weight: bold;
        }

    .book-features {
        display: flex;
        justify-content: center;
        align-items: stretch;
        gap: 30px;
        margin: 30px 0;
        flex-wrap: nowrap; /* Prevent wrapping to a new line */
        width: 100%;
    }

    .feature-item {
        background: #fff;
        border: 1.5px solid #05a94e;
        border-radius: 8px;
        padding: 18px 28px;
        display: flex;
        height: 100%;
        align-items: center;
        gap: 14px;
        min-width: 210px;
        font-size: 15px;
    }

        .feature-item i {
            color: #07a54b;
            font-size: 32px;
        }

    .feature-title {
        font-weight: 600;
        color: #07a54b;
        font-size: 15px;
    }

    .feature-desc {
        color: #07a54b;
        font-size: 14px;
    }

    .text-center {
	    text-decoration: none;
    }

    .text-center:hover {
	    color: #07a54b;
        }

    .book-tabs {
        display: flex;
        gap: 10px;
        margin-top: 60px;
        margin-bottom: 20px;
        justify-content: center;
    }

    .tab-btn {
        padding: 8px 20px;
        border: 1px solid #07a54b;
        background: #fff;
        color: #07a54b;
        font-weight: 600;
        cursor: pointer;
        outline: none;
        transition: background 0.2s, color 0.2s;
    }

        .tab-btn.active, .tab-btn:hover {
            background: #07a54b;
            color: #fff;
        }

    .tab-content {
        display: none;
    }

        .tab-content.active {
            display: block;
        }
.fade-in {
    opacity: 0;
    transform: translateY(30px);
    animation: fadeInUp 0.7s forwards;
}
keyframes fadeInUp {
    to {
        opacity: 1;
        transform: none;
    }
    }
</style>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        var myCarousel = document.querySelector('#heroCarousel');
        var carousel = new bootstrap.Carousel(myCarousel, {
            interval: 5000, // Thời gian chuyển slide (5 giây)
            pause: 'hover', // Tạm dừng khi di chuột vào
            wrap: true // Lặp lại slider
        });
    });
</script>
@section Scripts {
    <script src="~/Scripts/book-common.js"></script>
    <script>
    $(function(){
        @if (TempData["Success"] != null)
        {
	        <text>
            showCustomToast('@TempData["Success"]');
            </text>
        }
        @if (TempData["Error"] != null)
        {
	        <text>
            showCustomToast('@TempData["Error"]');
            </text>
        }
    });
    </script>
    <script>
        $(document).ready(function(){
            // Stagger effect: delay mỗi sản phẩm 100ms
            $('.tab-content.active .fade-in').each(function(i){
                $(this).css('animation-delay', (i * 0.1) + 's');
            });
            // Khi chuyển tab cũng áp dụng lại hiệu ứng stagger
            $('.tab-btn').click(function(){
                var target = $(this).data('target');
                $(target + ' .fade-in').each(function(i){
                    $(this).css('animation-delay', (i * 0.1) + 's');
                });
            });
            // Sau 1.2s mới hiện slider
            setTimeout(function(){
                $('#hero-slider').fadeIn(600);
            }, 1200);
        });
    </script>
    <script>
        $(function () {
            $('.tab-btn').click(function () {
                $('.tab-btn').removeClass('active');
                $(this).addClass('active');
                $('.tab-content').removeClass('active').hide();
                $($(this).data('target')).addClass('active').show();
            });
            // Mặc định hiển thị tab đầu tiên
            $('.tab-btn').first().click();
    });
</script>
}